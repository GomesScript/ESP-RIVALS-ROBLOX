-- Carregar a biblioteca CoastingLibrary
local CoastingLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/GhostDuckyy/UI-Libraries/main/Coasting%20Ui%20Lib/source.lua"))()

-- Criação do menu principal com título
local MainTab = CoastingLibrary:CreateTab("PRIME CHEAT")

-- Área para ESP
local EspSection = MainTab:CreateSection("ESP")

-- Função para criar ESP
local function CreateESP()
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local Camera = workspace.CurrentCamera

    local function UpdateESP(player)
        local character = player.Character
        if not character or not character:FindFirstChild("HumanoidRootPart") then
            return
        end

        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        local vector, onScreen = Camera:WorldToViewportPoint(humanoidRootPart.Position)

        local espInstance = character:FindFirstChild("ESPLabel")
        if not espInstance then
            espInstance = Instance.new("TextLabel")
            espInstance.Name = "ESPLabel"
            espInstance.Parent = character
            espInstance.BackgroundTransparency = 1
            espInstance.BorderSizePixel = 0
            espInstance.TextColor3 = Color3.fromRGB(255, 80, 10)
            espInstance.TextSize = 14
            espInstance.TextStrokeTransparency = 0
            espInstance.TextTransparency = 0.7
            espInstance.Font = Enum.Font.SourceSans
        end

        if onScreen then
            espInstance.Position = UDim2.new(0, vector.X, 0, vector.Y - 50)
            espInstance.Text = player.Name
            espInstance.Visible = true
        else
            espInstance.Visible = false
        end
    end

    local function OnPlayerAdded(player)
        player.CharacterAdded:Connect(function(character)
            -- Atualiza ESP quando o personagem é adicionado
            RunService.RenderStepped:Connect(function()
                UpdateESP(player)
            end)
        end)
    end

    -- Atualiza ESP para todos os jogadores existentes
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Players.LocalPlayer then
            OnPlayerAdded(player)
        end
    end

    -- Conecta a função OnPlayerAdded para novos jogadores
    Players.PlayerAdded:Connect(OnPlayerAdded)
end

-- Função para remover ESP
local function RemoveESP()
    for _, player in ipairs(game.Players:GetPlayers()) do
        local espInstance = player.Character and player.Character:FindFirstChild("ESPLabel")
        if espInstance then
            espInstance:Destroy()
        end
    end
end

-- Configuração da caixa de seleção para o ESP
EspSection:CreateToggle("ESP", "Ativar/desativar ESP", function(state)
    if state then
        CreateESP()
    else
        RemoveESP()
    end
end)

-- Área para MISC (Power Jump, Speed Hack, Fly)
local MiscSection = MainTab:CreateSection("MISC")

-- Fly Toggle
local flyEnabled = false
MiscSection:CreateToggle("Fly", function(enabled)
    flyEnabled = enabled
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    if flyEnabled then
        -- Adicionar BodyVelocity e BodyGyro para voar
        local bodyVelocity = Instance.new("BodyVelocity", humanoidRootPart)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)

        local bodyGyro = Instance.new("BodyGyro", humanoidRootPart)
        bodyGyro.CFrame = humanoidRootPart.CFrame
        bodyGyro.MaxTorque = Vector3.new(4000, 4000, 4000)

        game:GetService("RunService").Stepped:Connect(function()
            if flyEnabled then
                local direction = (game.Players.LocalPlayer:GetMouse().Hit.p - humanoidRootPart.Position).unit
                bodyVelocity.Velocity = direction * 50 -- Ajuste a velocidade do voo aqui
                bodyGyro.CFrame = CFrame.new(humanoidRootPart.Position, humanoidRootPart.Position + direction)
            end
        end)
    else
        -- Remove BodyVelocity e BodyGyro quando o voo é desativado
        for _, v in pairs(humanoidRootPart:GetChildren()) do
            if v:IsA("BodyVelocity") or v:IsA("BodyGyro") then
                v:Destroy()
            end
        end
    end
end)

-- Speed Hack Slider
MiscSection:CreateSlider("Speed", 0, 100, 16, false, function(value)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.WalkSpeed = value
    print("Speed:", value)
end)

-- Power Jump Toggle
MiscSection:CreateToggle("Power Jump", function(enabled)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    if enabled then
        humanoid.JumpPower = 100  -- Ajuste o poder do salto aqui
    else
        humanoid.JumpPower = 50  -- Valor padrão do poder do salto
    end
end)
